<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bendy Chronicles RU - –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ–±—ã—Ç–∏–π</title>
    <style>
        :root {
            --ink-black: #0a0a0a;
            --parchment: #f5e6ca;
            --ink-blue: #1a237e;
            --blood-red: #b71c1c;
            --film-border: #2a2a2a;
            --highlight: #ffd700;
            --event-game: #4caf50;
            --event-trailer: #2196f3;
            --event-announcement: #ff9800;
            --event-teaser: #9c27b0;
            --event-future: #607d8b;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }

        body {
            background-color: var(--ink-black);
            color: var(--parchment);
            overflow-x: hidden;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-image: radial-gradient(circle, #1a1a1a 0%, #0a0a0a 100%);
        }

        .header {
            text-align: center;
            padding: 20px;
            width: 100%;
            border-bottom: 2px solid var(--film-border);
            background-color: rgba(10, 10, 10, 0.9);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            letter-spacing: 2px;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .control-btn {
            background-color: var(--film-border);
            color: var(--parchment);
            border: 1px solid var(--parchment);
            padding: 8px 16px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .control-btn:hover {
            background-color: var(--ink-blue);
            transform: translateY(-2px);
        }

        .control-btn.active {
            background-color: var(--blood-red);
            box-shadow: 0 0 10px rgba(183, 28, 28, 0.7);
        }

        .calendar-container {
            width: 100%;
            height: 30vh;
            position: relative;
            overflow: hidden;
            border-top: 15px solid var(--film-border);
            border-bottom: 15px solid var(--film-border);
            background: linear-gradient(to bottom, #1a1a1a, #0a0a0a);
        }

        .film-strip {
            display: flex;
            height: 100%;
            transition: transform 0.3s ease;
            user-select: none;
        }

        .month-container {
            min-width: 100vw;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .month-header {
            font-size: 2rem;
            margin-bottom: 20px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 3px;
            border-bottom: 2px solid var(--parchment);
            padding-bottom: 10px;
            width: 100%;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 10px;
            width: 90%;
            max-width: 800px;
        }

        .day-header {
            text-align: center;
            font-weight: bold;
            padding: 5px;
            border-bottom: 1px solid var(--film-border);
        }

        .day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid var(--film-border);
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
            background-color: rgba(42, 42, 42, 0.5);
        }

        .day:hover {
            background-color: rgba(255, 215, 0, 0.1);
            transform: scale(1.05);
        }

        .day.empty {
            background-color: transparent;
            border: none;
            cursor: default;
        }

        .day.today {
            border: 2px solid var(--highlight);
            box-shadow: 0 0 10px var(--highlight);
        }

        .event-indicator {
            position: absolute;
            bottom: 5px;
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .event-game { background-color: var(--event-game); }
        .event-trailer { background-color: var(--event-trailer); }
        .event-announcement { background-color: var(--event-announcement); }
        .event-teaser { background-color: var(--event-teaser); }
        .event-future { background-color: var(--event-future); }

        .tooltip {
            position: fixed;
            background-color: rgba(10, 10, 10, 0.95);
            border: 2px solid var(--parchment);
            padding: 15px;
            border-radius: 8px;
            max-width: 300px;
            z-index: 1000;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
            display: none;
        }

        .tooltip.pinned {
            display: block;
        }

        .tooltip-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            border-bottom: 1px solid var(--parchment);
            padding-bottom: 5px;
        }

        .tooltip-title {
            font-weight: bold;
            font-size: 1.2rem;
        }

        .tooltip-type {
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
        }

        .tooltip-description {
            line-height: 1.4;
        }

        .pin-btn {
            background: none;
            border: none;
            color: var(--parchment);
            cursor: pointer;
            font-size: 1.2rem;
        }

        .search-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .search-content {
            background-color: var(--ink-black);
            border: 2px solid var(--parchment);
            padding: 30px;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
        }

        .search-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--parchment);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .search-inputs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        select, button {
            padding: 8px 12px;
            background-color: var(--film-border);
            color: var(--parchment);
            border: 1px solid var(--parchment);
            border-radius: 4px;
        }

        .search-btn {
            background-color: var(--ink-blue);
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .search-btn:hover {
            background-color: var(--blood-red);
        }

        .legend {
            display: flex;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
            justify-content: center;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .legend-color {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        @media (max-width: 768px) {
            .calendar-container {
                height: 40vh;
            }
            
            .month-header {
                font-size: 1.5rem;
            }
            
            .calendar-grid {
                gap: 5px;
            }
            
            .controls {
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Bendy Chronicles RU</h1>
        <p>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫–∞–ª–µ–Ω–¥–∞—Ä—å —Å–æ–±—ã—Ç–∏–π –≤—Å–µ–ª–µ–Ω–Ω–æ–π Bendy</p>
    </div>

    <div class="controls">
        <button class="control-btn" id="eventsOnlyBtn">–¢–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è</button>
        <button class="control-btn" id="searchBtn">–ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ—Ö–æ–¥</button>
        <button class="control-btn" id="todayBtn">–°–µ–≥–æ–¥–Ω—è</button>
    </div>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-color event-game"></div>
            <span>–†–µ–ª–∏–∑ –∏–≥—Ä—ã</span>
        </div>
        <div class="legend-item">
            <div class="legend-color event-trailer"></div>
            <span>–¢—Ä–µ–π–ª–µ—Ä</span>
        </div>
        <div class="legend-item">
            <div class="legend-color event-announcement"></div>
            <span>–ê–Ω–æ–Ω—Å</span>
        </div>
        <div class="legend-item">
            <div class="legend-color event-teaser"></div>
            <span>–¢–∏–∑–µ—Ä</span>
        </div>
        <div class="legend-item">
            <div class="legend-color event-future"></div>
            <span>–ë—É–¥—É—â–∏–µ –ø—Ä–æ–µ–∫—Ç—ã</span>
        </div>
    </div>

    <div class="calendar-container">
        <div class="film-strip" id="filmStrip">
            <!-- –ú–µ—Å—è—Ü—ã –±—É–¥—É—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>
    </div>

    <div class="tooltip" id="eventTooltip">
        <div class="tooltip-header">
            <div class="tooltip-title" id="tooltipTitle"></div>
            <div class="tooltip-type" id="tooltipType"></div>
            <button class="pin-btn" id="pinBtn">üìå</button>
        </div>
        <div class="tooltip-description" id="tooltipDescription"></div>
    </div>

    <div class="search-modal" id="searchModal">
        <div class="search-content">
            <div class="search-header">
                <h2>–ë—ã—Å—Ç—Ä—ã–π –ø–µ—Ä–µ—Ö–æ–¥</h2>
                <button class="close-btn" id="closeModalBtn">&times;</button>
            </div>
            <div class="search-inputs">
                <select id="yearSelect">
                    <!-- –ì–æ–¥—ã –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </select>
                <select id="monthSelect">
                    <!-- –ú–µ—Å—è—Ü—ã –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                </select>
                <button class="search-btn" id="goToDateBtn">–ü–µ—Ä–µ–π—Ç–∏</button>
            </div>
        </div>
    </div>

    <script>
        // –î–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏–π
        const bendyEvents = [
            {
                date: "2017-02-10",
                type: "game_release",
                title: "Bendy and the Ink Machine: –ì–ª–∞–≤–∞ 1",
                description: "–†–µ–ª–∏–∑ –ì–ª–∞–≤—ã 1: Moving Pictures (–ü–ö, –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è)."
            },
            {
                date: "2017-04-18",
                type: "game_release",
                title: "Bendy and the Ink Machine: –ì–ª–∞–≤–∞ 2",
                description: "–†–µ–ª–∏–∑ –ì–ª–∞–≤—ã 2: The Old Song (–ü–ö)."
            },
            {
                date: "2017-01-30",
                type: "trailer",
                title: "–ê–Ω–æ–Ω—Å–∏—Ä—É—é—â–∏–π —Ç—Ä–µ–π–ª–µ—Ä",
                description: "–ê–Ω–æ–Ω—Å–∏—Ä—É—é—â–∏–π —Ç—Ä–µ–π–ª–µ—Ä Bendy and the Ink Machine."
            },
            {
                date: "2024-04-18",
                type: "announcement",
                title: "–ê–Ω–æ–Ω—Å B3NDY",
                description: "–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∞–Ω–æ–Ω—Å —Ç—Ä–µ—Ç—å–µ–π –æ—Å–Ω–æ–≤–Ω–æ–π —á–∞—Å—Ç–∏ —Å–µ—Ä–∏–∏ (B3NDY)."
            },
            {
                date: "2025-08-01",
                type: "future",
                title: "–ù–∞—á–∞–ª–æ —Å—ä—ë–º–æ–∫ —Ñ–∏–ª—å–º–∞",
                description: "–°—ä—ë–º–∫–∏ —Ñ–∏–ª—å–º–∞ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –∞–≤–≥—É—Å—Ç 2025 –≥–æ–¥–∞."
            },
            {
                date: "2017-09-28",
                type: "game_release",
                title: "Bendy and the Ink Machine: –ì–ª–∞–≤–∞ 3",
                description: "–†–µ–ª–∏–∑ –ì–ª–∞–≤—ã 3: Rise and Fall (–ü–ö)."
            },
            {
                date: "2018-10-31",
                type: "game_release",
                title: "Bendy and the Ink Machine: –ì–ª–∞–≤–∞ 4",
                description: "–†–µ–ª–∏–∑ –ì–ª–∞–≤—ã 4: Colossal Wonders (–ü–ö)."
            },
            {
                date: "2018-04-10",
                type: "trailer",
                title: "–¢—Ä–µ–π–ª–µ—Ä –ì–ª–∞–≤—ã 4",
                description: "–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Ç—Ä–µ–π–ª–µ—Ä —á–µ—Ç–≤–µ—Ä—Ç–æ–π –≥–ª–∞–≤—ã Bendy and the Ink Machine."
            },
            {
                date: "2022-11-15",
                type: "game_release",
                title: "Bendy and the Dark Revival",
                description: "–†–µ–ª–∏–∑ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ —Å–∏–∫–≤–µ–ª–∞ Bendy and the Dark Revival."
            },
            {
                date: "2021-06-14",
                type: "teaser",
                title: "–¢–∏–∑–µ—Ä Bendy and the Dark Revival",
                description: "–ü–µ—Ä–≤—ã–π —Ç–∏–∑–µ—Ä –Ω–æ–≤–æ–π –∏–≥—Ä—ã –Ω–∞ E3 2021."
            },
            {
                date: "2023-09-12",
                type: "announcement",
                title: "–ê–Ω–æ–Ω—Å –∫–æ–º–∏–∫—Å–æ–≤",
                description: "–ê–Ω–æ–Ω—Å —Å–µ—Ä–∏–∏ –∫–æ–º–∏–∫—Å–æ–≤ –ø–æ –≤—Å–µ–ª–µ–Ω–Ω–æ–π Bendy."
            }
        ];

        // –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentYear = new Date().getFullYear();
        let currentMonth = new Date().getMonth();
        let eventsOnlyMode = false;
        let isDragging = false;
        let startX, scrollLeft;
        let pinnedTooltip = null;

        // –≠–ª–µ–º–µ–Ω—Ç—ã DOM
        const filmStrip = document.getElementById('filmStrip');
        const eventsOnlyBtn = document.getElementById('eventsOnlyBtn');
        const searchBtn = document.getElementById('searchBtn');
        const todayBtn = document.getElementById('todayBtn');
        const searchModal = document.getElementById('searchModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const yearSelect = document.getElementById('yearSelect');
        const monthSelect = document.getElementById('monthSelect');
        const goToDateBtn = document.getElementById('goToDateBtn');
        const eventTooltip = document.getElementById('eventTooltip');
        const tooltipTitle = document.getElementById('tooltipTitle');
        const tooltipType = document.getElementById('tooltipType');
        const tooltipDescription = document.getElementById('tooltipDescription');
        const pinBtn = document.getElementById('pinBtn');

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            generateCalendar();
            setupEventListeners();
            populateSearchSelects();
            goToCurrentMonth();
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞–ª–µ–Ω–¥–∞—Ä—è
        function generateCalendar() {
            filmStrip.innerHTML = '';
            
            for (let year = 2017; year <= 2025; year++) {
                for (let month = 0; month < 12; month++) {
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–æ–±—ã—Ç–∏—è –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ
                    const monthEvents = bendyEvents.filter(event => {
                        const eventDate = new Date(event.date);
                        return eventDate.getFullYear() === year && eventDate.getMonth() === month;
                    });
                    
                    // –ï—Å–ª–∏ —Ä–µ–∂–∏–º "–¢–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è" –∏ –≤ –º–µ—Å—è—Ü–µ –Ω–µ—Ç —Å–æ–±—ã—Ç–∏–π - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
                    if (eventsOnlyMode && monthEvents.length === 0) continue;
                    
                    const monthContainer = document.createElement('div');
                    monthContainer.className = 'month-container';
                    monthContainer.dataset.year = year;
                    monthContainer.dataset.month = month;
                    
                    const monthHeader = document.createElement('div');
                    monthHeader.className = 'month-header';
                    monthHeader.textContent = `${getMonthName(month)} ${year}`;
                    
                    const calendarGrid = document.createElement('div');
                    calendarGrid.className = 'calendar-grid';
                    
                    // –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–Ω–µ–π –Ω–µ–¥–µ–ª–∏
                    const daysOfWeek = ['–ü–Ω', '–í—Ç', '–°—Ä', '–ß—Ç', '–ü—Ç', '–°–±', '–í—Å'];
                    daysOfWeek.forEach(day => {
                        const dayHeader = document.createElement('div');
                        dayHeader.className = 'day-header';
                        dayHeader.textContent = day;
                        calendarGrid.appendChild(dayHeader);
                    });
                    
                    // –î–Ω–∏ –º–µ—Å—è—Ü–∞
                    const firstDay = new Date(year, month, 1).getDay();
                    // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –¥–ª—è –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫–∞ –∫–∞–∫ –ø–µ—Ä–≤–æ–≥–æ –¥–Ω—è –Ω–µ–¥–µ–ª–∏
                    const firstDayIndex = firstDay === 0 ? 6 : firstDay - 1;
                    
                    const daysInMonth = new Date(year, month + 1, 0).getDate();
                    
                    // –ü—É—Å—Ç—ã–µ —è—á–µ–π–∫–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –¥–Ω–µ–º
                    for (let i = 0; i < firstDayIndex; i++) {
                        const emptyDay = document.createElement('div');
                        emptyDay.className = 'day empty';
                        calendarGrid.appendChild(emptyDay);
                    }
                    
                    // –î–Ω–∏ –º–µ—Å—è—Ü–∞
                    for (let day = 1; day <= daysInMonth; day++) {
                        const dayElement = document.createElement('div');
                        dayElement.className = 'day';
                        dayElement.textContent = day;
                        dayElement.dataset.date = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –¥–µ–Ω—å —Å–µ–≥–æ–¥–Ω—è—à–Ω–∏–º
                        const today = new Date();
                        if (year === today.getFullYear() && month === today.getMonth() && day === today.getDate()) {
                            dayElement.classList.add('today');
                        }
                        
                        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–±—ã—Ç–∏—è –Ω–∞ —ç—Ç–æ—Ç –¥–µ–Ω—å
                        const dayEvents = bendyEvents.filter(event => event.date === dayElement.dataset.date);
                        
                        if (dayEvents.length > 0) {
                            // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–æ–±—ã—Ç–∏—è
                            const eventIndicator = document.createElement('div');
                            eventIndicator.className = `event-indicator event-${dayEvents[0].type.replace('_', '-')}`;
                            dayElement.appendChild(eventIndicator);
                            
                            // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ tooltip
                            dayElement.addEventListener('mouseenter', showEventTooltip);
                            dayElement.addEventListener('mouseleave', hideEventTooltip);
                            dayElement.addEventListener('click', pinEventTooltip);
                        }
                        
                        calendarGrid.appendChild(dayElement);
                    }
                    
                    monthContainer.appendChild(monthHeader);
                    monthContainer.appendChild(calendarGrid);
                    filmStrip.appendChild(monthContainer);
                }
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å tooltip —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–æ–±—ã—Ç–∏–∏
        function showEventTooltip(e) {
            if (pinnedTooltip) return;
            
            const date = e.target.dataset.date;
            const event = bendyEvents.find(ev => ev.date === date);
            
            if (event) {
                tooltipTitle.textContent = event.title;
                tooltipType.textContent = getEventTypeName(event.type);
                tooltipType.className = `tooltip-type event-${event.type.replace('_', '-')}`;
                tooltipDescription.textContent = event.description;
                
                // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º tooltip
                const rect = e.target.getBoundingClientRect();
                eventTooltip.style.left = `${rect.left + window.scrollX}px`;
                eventTooltip.style.top = `${rect.bottom + window.scrollY + 10}px`;
                
                eventTooltip.style.display = 'block';
            }
        }

        // –°–∫—Ä—ã—Ç—å tooltip
        function hideEventTooltip() {
            if (!pinnedTooltip) {
                eventTooltip.style.display = 'none';
            }
        }

        // –ó–∞–∫—Ä–µ–ø–∏—Ç—å tooltip
        function pinEventTooltip(e) {
            const date = e.target.dataset.date;
            const event = bendyEvents.find(ev => ev.date === date);
            
            if (event) {
                if (pinnedTooltip === date) {
                    // –ï—Å–ª–∏ tooltip —É–∂–µ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω –¥–ª—è —ç—Ç–æ–π –¥–∞—Ç—ã - –æ—Ç–∫—Ä–µ–ø–ª—è–µ–º
                    pinnedTooltip = null;
                    eventTooltip.classList.remove('pinned');
                    eventTooltip.style.display = 'none';
                } else {
                    // –ó–∞–∫—Ä–µ–ø–ª—è–µ–º tooltip
                    pinnedTooltip = date;
                    eventTooltip.classList.add('pinned');
                    
                    // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –≤ –æ–¥–Ω–æ–º –∏–∑ —É–≥–ª–æ–≤
                    const viewportWidth = window.innerWidth;
                    const viewportHeight = window.innerHeight;
                    const tooltipWidth = eventTooltip.offsetWidth;
                    const tooltipHeight = eventTooltip.offsetHeight;
                    
                    eventTooltip.style.left = `${viewportWidth - tooltipWidth - 20}px`;
                    eventTooltip.style.top = `${20}px`;
                }
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ "–¢–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è"
        function toggleEventsOnlyMode() {
            eventsOnlyMode = !eventsOnlyMode;
            eventsOnlyBtn.classList.toggle('active', eventsOnlyMode);
            generateCalendar();
            goToCurrentMonth();
        }

        // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Ç–µ–∫—É—â–µ–º—É –º–µ—Å—è—Ü—É
        function goToCurrentMonth() {
            const currentMonthElement = document.querySelector(`.month-container[data-year="${currentYear}"][data-month="${currentMonth}"]`);
            if (currentMonthElement) {
                currentMonthElement.scrollIntoView({ behavior: 'smooth', inline: 'center' });
            }
        }

        // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –¥–∞—Ç–µ
        function goToSelectedDate() {
            const year = parseInt(yearSelect.value);
            const month = parseInt(monthSelect.value);
            
            const targetMonth = document.querySelector(`.month-container[data-year="${year}"][data-month="${month}"]`);
            if (targetMonth) {
                targetMonth.scrollIntoView({ behavior: 'smooth', inline: 'center' });
                searchModal.style.display = 'none';
            }
        }

        // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—ã–ø–∞–¥–∞—é—â–∏—Ö —Å–ø–∏—Å–∫–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞
        function populateSearchSelects() {
            // –ì–æ–¥—ã
            yearSelect.innerHTML = '';
            for (let year = 2017; year <= 2025; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year;
                yearSelect.appendChild(option);
            }
            yearSelect.value = currentYear;
            
            // –ú–µ—Å—è—Ü—ã
            monthSelect.innerHTML = '';
            for (let month = 0; month < 12; month++) {
                const option = document.createElement('option');
                option.value = month;
                option.textContent = getMonthName(month);
                monthSelect.appendChild(option);
            }
            monthSelect.value = currentMonth;
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function getMonthName(monthIndex) {
            const months = [
                '–Ø–Ω–≤–∞—Ä—å', '–§–µ–≤—Ä–∞–ª—å', '–ú–∞—Ä—Ç', '–ê–ø—Ä–µ–ª—å', '–ú–∞–π', '–ò—é–Ω—å',
                '–ò—é–ª—å', '–ê–≤–≥—É—Å—Ç', '–°–µ–Ω—Ç—è–±—Ä—å', '–û–∫—Ç—è–±—Ä—å', '–ù–æ—è–±—Ä—å', '–î–µ–∫–∞–±—Ä—å'
            ];
            return months[monthIndex];
        }

        function getEventTypeName(type) {
            const typeNames = {
                'game_release': '–†–µ–ª–∏–∑ –∏–≥—Ä—ã',
                'trailer': '–¢—Ä–µ–π–ª–µ—Ä',
                'announcement': '–ê–Ω–æ–Ω—Å',
                'teaser': '–¢–∏–∑–µ—Ä',
                'future': '–ë—É–¥—É—â–∏–π –ø—Ä–æ–µ–∫—Ç'
            };
            return typeNames[type] || type;
        }

        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function setupEventListeners() {
            // –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            eventsOnlyBtn.addEventListener('click', toggleEventsOnlyMode);
            searchBtn.addEventListener('click', () => searchModal.style.display = 'flex');
            todayBtn.addEventListener('click', goToCurrentMonth);
            
            // –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–æ–∏—Å–∫–∞
            closeModalBtn.addEventListener('click', () => searchModal.style.display = 'none');
            goToDateBtn.addEventListener('click', goToSelectedDate);
            
            // –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
            filmStrip.addEventListener('mousedown', startDrag);
            filmStrip.addEventListener('touchstart', startDrag);
            document.addEventListener('mousemove', drag);
            document.addEventListener('touchmove', drag);
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchend', endDrag);
            
            // –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è tooltip
            pinBtn.addEventListener('click', () => {
                pinnedTooltip = null;
                eventTooltip.classList.remove('pinned');
                eventTooltip.style.display = 'none';
            });
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è
        function startDrag(e) {
            isDragging = true;
            startX = (e.type === 'mousedown' ? e.pageX : e.touches[0].pageX) - filmStrip.offsetLeft;
            scrollLeft = filmStrip.scrollLeft;
            filmStrip.style.cursor = 'grabbing';
        }

        function drag(e) {
            if (!isDragging) return;
            e.preventDefault();
            const x = (e.type === 'mousemove' ? e.pageX : e.touches[0].pageX) - filmStrip.offsetLeft;
            const walk = (x - startX) * 2;
            filmStrip.scrollLeft = scrollLeft - walk;
        }

        function endDrag() {
            isDragging = false;
            filmStrip.style.cursor = 'grab';
            
            // "–ü—Ä–∏–º–∞–≥–Ω–∏—á–∏–≤–∞–Ω–∏–µ" –∫ –±–ª–∏–∂–∞–π—à–µ–º—É –º–µ—Å—è—Ü—É
            const scrollPosition = filmStrip.scrollLeft;
            const monthWidth = filmStrip.offsetWidth;
            const currentIndex = Math.round(scrollPosition / monthWidth);
            
            filmStrip.scrollTo({
                left: currentIndex * monthWidth,
                behavior: 'smooth'
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
